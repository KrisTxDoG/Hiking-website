<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-icons.css" rel="stylesheet">
        <link href="css/tooplate-clean-work.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/style.css">
        <link rel="stylesheet" href="./js/jquery.min.js">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
</head>
<body>
    <nav id="navBarRun" class="navbar navbar-expand-lg navbar-adjust" style="width:100%; background: var(--secondary-color); top:0px !important;">
        <div class="container">
            <a class="navbar-brand" href="index.html">
            <img class="img-size" src="../img/登山logo.webp" alt="Brand">
            <span class="ms-3">
                <strong>登 山  &nbsp; &nbsp; &nbsp;  趣</strong>
            </span>
 
            <!-- 製作按鈕 -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto" id="navbarNav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">首頁</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="good.html">
                            百岳介紹
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">裝備介紹
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            登山須知
                        </a>
                    </li>
                    <!-- 會員登入系統 -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarLightDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">會員系統</a>
                        <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="navbarLightDropdownMenuLink">
                            <li><a class="dropdown-item" href="loginSystem.html">會員登入</a></li>
                            <li><a class="dropdown-item" href="">會員等級</a></li>
                            <li><a class="dropdown-item" href="">訂單查詢</a></li>
                        </ul>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="nav-link custom-btn custom-border-btn custom-btn-white btn" href="#toBalance">開始</a>
                    </li>
                </ul>
            </div>
 
        </a>
    </div>
    </nav>



    <br><br><br><br><br>



    <!-- 標頭地區 -->
    <section class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-12 ">
                    <div class="ms-5" style="margin-left: 450px !important;"><img class="img-fluid" src="img/icon/mountain 3.png" alt=""></div>
                </div>
                <div class="col-lg-7 col-12 mt-4">
                    <div><h2>價目表</h2></div>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
        <div class="m-5">
            <form action="">

                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">山岳名稱</th>
                        <th scope="col">售價</th>
                        <th scope="col">開始日期</th>
                        <th scope="col">結束日期</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">1</th>
                        <td>北大武</td>
                        <td>6000</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr>
                      <tr>
                        <th scope="row">2</th>
                        <td>玉山主峰</td>
                        <td>4000</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr>
                      <tr>
                        <th scope="row">3</th>
                        <td >奇萊南華</td>
                        <td>4500</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr>
                      <tr>
                        <th scope="row">4</th>
                        <td>大霸尖山</td>
                        <td>5000</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr>
                      <tr>
                        <th scope="row">5</th>
                        <td>雪山主峰</td>
                        <td>7500</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr>
                      <tr>
                        <th scope="row">6</th>
                        <td>嘉明湖</td>
                        <td>8000</td>
                        <td>2022-02-30</td>
                        <td>2022-02-30</td>
                      </tr> 
                    </tbody>
                  </table>

            </form>

            <hr>
        </div>
    </div>
    


    <section class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-12 ">
                    <div class="ms-5" style="margin-left: 450px !important;"><img class="img-fluid" src="img/icon/checklist.png" alt=""></div>
                </div>
                <div class="col-lg-7 col-12 mt-4">
                    <div><h2>表單提交</h2></div>
                </div>
            </div>
        </div>
    </section>



    <!-- 提交表單 -->
    <section>
        <div class="m-5">
            <form>
                <fieldset>
                  <legend>表單提交</legend>

                    <label for="" class="form-label">姓名</label>
                    <input type="text" id="inputPassword5" class="form-control" aria-describedby="">
                    <div id="name" class="form-text">
                    Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.
                    </div>


                     <div class="mb-3">
                    <label for="Moun_name" class="form-label">行程選擇</label>
                    <select class="form-select" name="" id="Moun_order_name">
                        <option value="北大武山">北大武山</option>
                        <option value="玉山主峰">玉山主峰</option>
                        <option value="雪山主峰">雪山主峰</option>
                        <option value="嘉明湖">嘉明湖</option>
                        <option value="奇萊南華">奇萊南華</option>
                        <option value="大霸尖山">大霸尖山</option>
                    </select>
        
                  </div>
                  <div class="mb-3">
                    <label for="Moun_num" class="form-label">數量</label>
                    <select class="form-select" id="Moun_order_num">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                    </select>
                  </div>
                  <button type="submit" class="btn text-white w-100" style="background-color:var(--secondary-color)" id="Moun_order">提交</button>
                </fieldset>
              </form>
        </div>
    </section>



    <section class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-12 ">
                    <div class="ms-5" style="margin-left: 450px !important;"><img class="img-fluid" src="img/icon/booking.png" alt=""></div>
                </div>
                <div class="col-lg-7 col-12 mt-4">
                    <div><h2>價目表</h2></div>
                </div>
            </div>
        </div>
    </section>


    
    <!-- 樣式板模 -->
    <section class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">

                    <form action="">

                        <table class="table table-striped">
                            <thead>
                              <tr>
                                <th scope="col"><p class="text-center">編號</p></th>
                                <th scope="col"><p class="text-center">領隊</p></th>
                                <th scope="col"><p class="text-center">商品</p></th>
                                <th scope="col"><p class="text-center">價格</p></th>
                                <th scope="col"><p class="text-center">數量</p></th>
                                <th scope="col"><p class="text-center">小記</p></th>
                                <!-- <th scope="col"><p class="text-center">刪除</p></th> -->
                                <!-- <th scope="col"><p class="text-center">總計</p></th> -->
                              </tr>
                            </thead>
    
                            <tbody >
                              <tr>
                                <th scope="col" id="mountain_index"></th>
    
                                <td >
                                    <p class="text-center" id="mountain_leader"></p>
                                </td>
                           
                                <td >
                                    <p class="text-center" id="mountain_name"></p>
                                </td>
                            
                                <td >
                                    <p class="text-center" id="mountain_per_QQQ"></p>
                                </td>
                             
                                <td >
                                    <p class="text-center" id="mountain_num"></p>
                                </td>
                             
                                <td>
                                    <p class="text-center" class="MoneyQQQ" id="mountain_little_total"></p>
                                </td>
                            
                                <!-- 刪除鍵 -->
                                <!-- <td>
                                    <div class="text-center mountain_del"></div>
                                </td> -->
    
                                <!-- <td ><p class="text-center" id="total_money"></p></td> -->
                
                              </tr>
                            
                            </tbody>
                        </table>
                        <button type="submit" class="btn text-white w-100" style="background-color:var(--secondary-color)" id="mountain_del">刪除</button>

                    </form>   
                </div>



                <div class="col-lg-6 ">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th><p class="text-center">購物車總計</p></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><p class="text-start" id="total_money">總計</p><p id="totalMoney"></p></td>
                                
                            </tr>
    
                            
                        </tbody>
                    </table>
                    <button class="btn w-100 text-white" style="background-color: var(--secondary-color);">前往結賬</button>

                    <br><br>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th><p class="text-start">折價卷</p></th>
                            </tr>
                        </thead>
                    
                        <tbody>                         
                        </tbody>
                    </table>


                    <!-- 輸入折價券 -->
                    <div class="w-100">
                        <input type="text" style="width: 100%" placeholder="   請 輸 入 折 價 卷">
                    </div>
                
                    

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                
                            </tr>
                        </thead>

                        <br>
                    
                        <tbody>
                            <button class="btn w-100 text-white" style="background-color:var(--secondary-color)">使用折價卷</button>
                        </tbody>
                    </table>


                </div>
            </div>
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>



        $(function() {

            var mountain = 
            [
                {
                    journey_name: "北大武三天兩夜", 
                    journey_name: "Krist",
                    journey_name: "0975870720",
                    journey_start_data: "2023-05-21",
                    journey_end_data: "2023-05-23",
                    journey_num: 1,
                    journey_perPrice: 0,
                    journey_total: 0
                },
                {
                    journey_name: "北大武三天兩夜", 
                    journey_name: "Krist",
                    journey_name: "0975870720",
                    journey_start_data: "2023-05-21",
                    journey_end_data: "2023-05-23",
                    journey_num: 1,
                    journey_perPrice: 0,
                    journey_total: 0
                }
            ];


            $.get("/home/journey", function(e) {
                mountain_MySQL = JSON.parse(e);
                refreshNewUI();

                // console.log(e) // [{"journey_id":1,"journey_name":"北大武三天兩夜","journey_leader_name":"Krist","journey_leader_phone":"0975870720","journey_start_data":"2023-05-20T16:00:00.000Z","journey_end_data":"2023-05-22T16:00:00.000Z","journey_num":"1","journey_p
            })

                

                var jou_index = 1;
                function refreshNewUI() {
                    $("#latestNews").empty();

                    $.each(mountain_MySQL, function(key, obj) {
                        var jou_name = obj.journey_name;
                        var jou_perPrice = obj.journey_perPrice;
                        var jou_num = obj.journey_num;
                        var jou_total = jou_perPrice * parseInt(jou_num);
                        var jou_leader = obj.journey_leader_name;
                        var jou_ID = obj.journey_Id;
                    


                        // 將資料加入到 HTML 當中
                        var $Mn = $(`<p class="text-center"> ${jou_name} </p>`);
                        $Mn.appendTo("#mountain_name");

                        var $Mu = $(`<p class="text-center"> ${jou_num} </p>`);
                        $Mu.appendTo("#mountain_num");

                        var $Mt = $(`<p class="text-center"> ${jou_perPrice} </p>`);
                        $Mt.appendTo("#mountain_per_QQQ");

                        var $Ml = $(`<p class="text-center"> ${jou_leader} </p>`);
                        $Ml.appendTo("#mountain_leader");

                        var $Mlt = $(`<p class="text-center"> ${jou_total} </p>`);
                        $Mlt.appendTo("#mountain_little_total");

                        // ----- 刪除鍵 ----- 
                        // var $M_del = $(`<button class="btn btn-danger"><i class="bi bi-trash"></i></button><br>`);
                        // $M_del.appendTo(".mountain_del");


                        // index 呈現在網頁上
                        var $M_index = $(`<p class="text-center"> ${jou_index} </p>`);
                        $M_index.appendTo("#mountain_index");
                        jou_index++;
                    })



                    // 設定刪除鍵
                    $("#mountain_del").click(function() {
                        $.ajax({
                            type: "delete",
                            url : "/home/journey",
                            data: mountain_MySQL[mountain_MySQL.length -1]
                        })
                        .then(function() {
                            $.get("/home/journey", function(e) {
                                mountain_MySQL = JSON.parse(e);
                                refreshNewUI();
                            })
                        })
                    })
                }



                // ----- 試試看 點擊按鈕 是否可以執行-----
                // 新增資料
                $("#Moun_order").click(function() {
                    
                    var perMoney = [];
                    if($("#Moun_order_name").val() == "北大武山") {
                        perMoney = 6000;
                    }else if($("#Moun_order_name").val() == "玉山主峰") {
                        perMoney = 4000;
                    }else if($("#Moun_order_name").val() == "雪山主峰") {
                        perMoney = 7500;
                    }else if($("#Moun_order_name").val() == "嘉明湖") {
                        perMoney = 8000;
                    }else if($("#Moun_order_name").val() == "奇萊南華") {
                        perMoney = 4500;
                    }else if($("#Moun_order_name").val() == "大霸尖山") {
                        perMoney = 5000;
                    }else {
                        console.log("不知道");
                    }

                    // 設定領隊
                    var leader = [];
                    if($("#Moun_order_name").val() == "北大武山") {
                        leader = "Krist";
                    }else if($("#Moun_order_name").val() == "玉山主峰") {
                        leader = "Sofiya";
                    }else if($("#Moun_order_name").val() == "雪山主峰") {
                        leader = "Hello";
                    }else if($("#Moun_order_name").val() == "嘉明湖") {
                        leader = "Bill";
                    }else if($("#Moun_order_name").val() == "奇萊南華") {
                        leader = "Mariya";
                    }else if($("#Moun_order_name").val() == "大霸尖山") {
                        leader = "Jerry";
                    }else {
                        console.log("不知道");
                    }

                    // 必須符合 MySQL 當中的格式
                    var Moun_order = {
                        journey_name: $("#Moun_order_name").val(), 
                        journey_leader_name: leader,
                        journey_leader_phone: "0975870720",
                        journey_start_data: "2023-05-21",
                        journey_end_data: "2023-05-23",
                        journey_num: $("#Moun_order_num").val(),
                        journey_perPrice: perMoney,
                        journey_total: perMoney * $("#Moun_order_num").val()
                    };

                    // 透過傳輸
                    $.ajax({
                        type: "post",
                        url: "/home/journey",
                        data:Moun_order,
                        dataType:"text",
                        success: function(happy) {
                            $("#test").text("happy");
                        }
                    })

                    // 重新取回資料
                    .then(function(e) {
                        $.get("/home/journey", function(e) {
                            // JOSN 字串轉換為數值或物件
                            mountain.JSON.parse(e);
                            refreshNewUI();
                        })
                    })
                })

                console.log(Moun_total);
        })


        
    
    </script>

    <script>

                


    </script>
    
</body>
</html>